<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Prompts</title>
    <style>
      .accordion {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        transition: 0.4s;
      }
      
      .active, .accordion:hover {
        background-color: #ccc; 
      }
      
      .panel {
        padding: 0 18px;
        display: none;
        background-color: white;
        overflow: hidden;
      }
    </style>
  </head>
  
  <body>
    <h2>Prompts used</h2>

    
    <!--
        --------------------- Start prompt ----------------------
    -->
    <button class="accordion">
        <pre>
<b>
Create html page for menu with questions list and initially hidden answers.
Don't use external libraries.
</b>
        </pre>
    </button>
    <pre class="panel">
      <p>
Sure, I can help you create a basic HTML structure that includes a collapsible accordion (which is similar to what you are asking). 

Here it goes:

```html
&lt;!DOCTYPE html>
&lt;html lang="en">
  &lt;head>
    &lt;meta charset="UTF-8" />
    &lt;title>FAQs Page&lt;/title>
    &lt;style>
      .accordion {
        background-color: #eee;
        color: #444;
        cursor: pointer;
        padding: 18px;
        width: 100%;
        border: none;
        text-align: left;
        outline: none;
        font-size: 15px;
        transition: 0.4s;
      }
      
      .active, .accordion:hover {
        background-color: #ccc; 
      }
      
      .panel {
        padding: 0 18px;
        display: none;
        background-color: white;
        overflow: hidden;
      }
    &lt;/style>
  &lt;/head>
  
  &lt;body>
    &lt;h2>FAQs&lt;/h2>
    
    &lt;button class="accordion">Question 1?&lt;/button>
    &lt;div class="panel">
    &lt;p>Answer to Question 1.&lt;/p>
    &lt;/div>
    
    &lt;button class="accordion">Question 2?&lt;/button>
    &lt;div class="panel">
      &lt;p>Answer to Question 2.&lt;/p>
    &lt;/div>
        
    &lt;script>
      var acc = document.getElementsByClassName("accordion");
      
      for (var i = 0; i &lt; acc.length; i++) {
        acc[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var panel = this.nextElementSibling;
          
          if (panel.style.display === "block") {
            panel.style.display = "none";
          } else {
            panel.style.display = "block";
          }
        });
      }
    &lt;/script>
  &lt;/body>
&lt;/html>
```

This code will create a basic FAQs page with two questions (Question 1? and Question 2?) that are hidden by default, and when clicked, they expand to 
show the answers. The CSS makes it look nice. The JavaScript is what handles the collapsing of each question's answer when you click on its heading.


      </p>
    </pre>
    
    <!--
        --------------------- Start prompt ----------------------
    -->
    <button class="accordion">
        <pre>
            <b>
Create PlantUML diagram for Entity-Attribute-Value model
with EntityType class having one to many relationship to Entity
            </b>
        </pre>
    </button>
    <pre class="panel">
      <p>
@startuml
' Define classes
class EntityType {
  +id: int
  +name: string
}

class Entity {
  +id: int
  +entityTypeId: int
  +name: string
}

class Attribute {
  +id: int
  +name: string
  +entityTypeId: int
}

class Value {
  +id: int
  +entityId: int
  +attributeId: int
  +value: string
}

' Relationships
EntityType "1" -- "0..*" Entity : has
Entity "1" -- "0..*" Value : has
Attribute "1" -- "0..*" Value : defines
@enduml      
      </p>
    </pre>

    <!--
        --------------------- Start prompt ----------------------
    -->
    <button class="accordion">
        <pre>
            <b>
Create java backend for CRUD operations on tables
generated from uml diagramm
@startuml
' Define classes
class EntityType {
  +id: int
  +name: string
}

class Entity {
  +id: int
  +entityTypeId: int
  +name: string
}

class Attribute {
  +id: int
  +name: string
  +entityTypeId: int
}

class Value {
  +id: int
  +entityId: int
  +attributeId: int
  +value: string
}

' Relationships
EntityType "1" -- "0..*" Entity : has
Entity "1" -- "0..*" Value : has
Attribute "1" -- "0..*" Value : defines
@enduml      
Add Flyway migration for PostreSQL with table names in plural form and low case snake case letters
Add unit and functional tests
            </b>
        </pre>
    </button>
    <pre class="panel">
      <p>
Below is a Java backend implementation using Spring Boot for CRUD operations on the tables defined in the UML diagram.

**Entity Classes**

```java
@Entity
public class EntityType {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    // Getters and Setters
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
}

@Entity
public class Entity {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @ManyToOne
    @JoinColumn(name = "entity_type_id")
    private EntityType entityType;

    // Getters and Setters
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public EntityType getEntityType() {
        return entityType;
    }

    public void setEntityType(EntityType entityType) {
        this.entityType = entityType;
    }
}

@Entity
public class Attribute {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String name;

    @ManyToOne
    @JoinColumn(name = "entity_type_id")
    private EntityType entityType;

    // Getters and Setters
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public EntityType getEntityType() {
        return entityType;
    }

    public void setEntityType(EntityType entityType) {
        this.entityType = entityType;
    }
}

@Entity
public class Value {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private int id;
    private String value;

    @ManyToOne
    @JoinColumn(name = "entity_id")
    private Entity entity;

    @ManyToOne
    @JoinColumn(name = "attribute_id")
    private Attribute attribute;

    // Getters and Setters
    public int getId() {
        return id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public String getValue() {
        return value;
    }

    public void setValue(String value) {
        this.value = value;
    }

    public Entity getEntity() {
        return entity;
    }

    public void setEntity(Entity entity) {
        this.entity = entity;
    }

    public Attribute getAttribute() {
        return attribute;
    }

    public void setAttribute(Attribute attribute) {
        this.attribute = attribute;
    }
}
```

**Repository Interfaces**

```java
public interface EntityTypeRepository extends JpaRepository<EntityType, Integer> {
}

public interface EntityRepository extends JpaRepository<Entity, Integer> {
}

public interface AttributeRepository extends JpaRepository<Attribute, Integer> {
}

public interface ValueRepository extends JpaRepository<Value, Integer> {
}
```

**Service Classes**

```java
@Service
public class EntityTypeService {
    private final EntityTypeRepository repository;

    @Autowired
    public EntityTypeService(EntityTypeRepository repository) {
        this.repository = repository;
    }

    public List<EntityType> getAll() {
        return repository.findAll();
    }

    public EntityType getEntityById(int id) {
        return repository.findById(id).orElse(null);
    }

    public EntityType createEntityType(String name) {
        EntityType entityType = new EntityType();
        entityType.setName(name);
        return repository.save(entityType);
    }

    public EntityType updateEntityType(EntityType entityType, String name) {
        if (entityType.getId() != null) {
            entityType.setName(name);
            return repository.save(entityType);
        } else {
            return null;
        }
    }

    public void deleteEntityById(int id) {
        repository.deleteById(id);
    }
}

@Service
public class EntityService {
    private final EntityRepository repository;

    @Autowired
    public EntityService(EntityRepository repository) {
        this.repository = repository;
    }

    public List<Entity> getAll() {
        return repository.findAll();
    }

    public Entity getEntityById(int id) {
        return repository.findById(id).orElse(null);
    }

    public Entity createEntity(String name, int entityTypeId) {
        Entity entity = new Entity();
        entity.setName(name);
        entity.setEntityType(repository.findById(entityTypeId).orElse(null));
        return repository.save(entity);
    }

    public Entity updateEntity(Entity entity, String name, int entityTypeId) {
        if (entity.getId() != null && entity.getEntityType().getId() != null) {
            entity.setName(name);
            entity.setEntityType(repository.findById(entityTypeId).orElse(null));
            return repository.save(entity);
        } else {
            return null;
        }
    }

    public void deleteEntityById(int id) {
        repository.deleteById(id);
    }
}

@Service
public class AttributeService {
    private final AttributeRepository repository;

    @Autowired
    public AttributeService(AttributeRepository repository) {
        this.repository = repository;
    }

    public List<Attribute> getAll() {
        return repository.findAll();
    }

    public Attribute getAttributeById(int id) {
        return repository.findById(id).orElse(null);
    }

    public Attribute createAttribute(String name, int entityTypeId) {
        Attribute attribute = new Attribute();
        attribute.setName(name);
        attribute.setEntityType(repository.findById(entityTypeId).orElse(null));
        return repository.save(attribute);
    }

    public Attribute updateAttribute(Attribute attribute, String name, int entityTypeId) {
        if (attribute.getId() != null && attribute.getEntityType().getId() != null) {
            attribute.setName(name);
            attribute.setEntityType(repository.findById(entityTypeId).orElse(null));
            return repository.save(attribute);
        } else {
            return null;
        }
    }

    public void deleteAttributeById(int id) {
        repository.deleteById(id);
    }
}

@Service
public class ValueService {
    private final ValueRepository repository;

    @Autowired
    public ValueService(ValueRepository repository) {
        this.repository = repository;
    }

    public List<Value> getAll() {
        return repository.findAll();
    }

    public Value getValueById(int id) {
        return repository.findById(id).orElse(null);
    }

    public Value createValue(String value, int entityId, int attributeId) {
        Value valueEntity = new Value();
        valueEntity.setValue(value);
        valueEntity.setEntity(repository.findById(entityId).orElse(null));
        valueEntity.setAttribute(repository.findById(attributeId).orElse(null));
        return repository.save(valueEntity);
    }

    public Value updateValue(Value value, String value, int entityId, int attributeId) {
        if (value.getId() != null && value.getEntity().getId() != null && value.getAttribute().getId() != null) {
            value.setValue(value);
            value.setEntity(repository.findById(entityId).orElse(null));
            value.setAttribute(repository.findById(attributeId).orElse(null));
            return repository.save(value);
        } else {
            return null;
        }
    }

    public void deleteValueById(int id) {
        repository.deleteById(id);
    }
}
```

**Flyway Migration Configuration**

Create a `application.properties` file with the following content:

```properties
spring.datasource.url=jdbc:postgresql://localhost:5432/mydatabase
spring.datasource.username=myuser
spring.datasource.password=mypassword

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
```

**Database Schema**

After migration, the database schema will be created with table names in plural form and low case snake case letters:

```sql
CREATE TABLE entity_types (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE entities (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    entity_type_id INTEGER NOT NULL REFERENCES entity_types(id),
    CONSTRAINT fk_entity_type FOREIGN KEY (entity_type_id) REFERENCES entity_types (id)
);

CREATE TABLE attributes (
    id SERIAL PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    entity_type_id INTEGER NOT NULL REFERENCES entity_types(id),
    CONSTRAINT fk_entity_type FOREIGN KEY (entity_type_id) REFERENCES entity_types (id)
);

CREATE TABLE values (
    id SERIAL PRIMARY KEY,
    value VARCHAR(255) NOT NULL,
    entity_id INTEGER NOT NULL REFERENCES entities(id),
    attribute_id INTEGER NOT NULL REFERENCES attributes(id),
    CONSTRAINT fk_entity FOREIGN KEY (entity_id) REFERENCES entities(id),
    CONSTRAINT fk_attribute FOREIGN KEY (attribute_id) REFERENCES attributes(id)
);
```

**Unit Tests**

```java
@RunWith(SpringRunner.class)
@SpringBootTest
public class EntityTypeRepositoryTest {

    @Autowired
    private EntityTypeRepository repository;

    @Test
    public void testGetAll() {
        List<EntityType> entityTypes = repository.findAll();
        assertNotNull(entityTypes);
        assertEquals(1, entityTypes.size());
    }

    @Test
    public void testGetEntityById() {
        EntityType entityType = repository.findById(1L).orElse(null);
        assertNotNull(entityType);
        assertNotNull(entityType.getId());
    }

    @Test
    public void testCreateEntityType() {
        EntityType entityType = repository.save(new EntityType("test"));
        assertNotNull(entityType);
        assertEquals("test", entityType.getName());
    }

    @Test
    public void testUpdateEntityType() {
        EntityType entityType = new EntityType("test");
        entityType.setId(1L);
        EntityType updatedEntityType = repository.save(entityType);
        assertNotNull(updatedEntityType);
        assertEquals("test", updatedEntityType.getName());
    }
}

@RunWith(SpringRunner.class)
@SpringBootTest
public class EntityRepositoryTest {

    @Autowired
    private EntityRepository repository;

    @Test
    public void testGetAll() {
        List<Entity> entities = repository.findAll();
        assertNotNull(entities);
        assertEquals(1, entities.size());
    }

    @Test
    public void testGetEntityById() {
        Entity entity = repository.findById(1L).orElse(null);
        assertNotNull(entity);
        assertNotNull(entity.getId());
    }

    @Test
    public void testCreateEntity() {
        Entity entity = new Entity("test", 1);
        Entity createdEntity = repository.save(entity);
        assertNotNull(createdEntity);
        assertEquals("test", createdEntity.getName());
    }

    @Test
    public void testUpdateEntity() {
        Entity entity = new Entity("test", 1);
        entity.setId(1L);
        Entity updatedEntity = repository.save(entity);
        assertNotNull(updatedEntity);
        assertEquals("test", updatedEntity.getName());
    }
}

@RunWith(SpringRunner.class)
@SpringBootTest
public class AttributeRepositoryTest {

    @Autowired
    private AttributeRepository repository;

    @Test
    public void testGetAll() {
        List<Attribute> attributes = repository.findAll();
        assertNotNull(attributes);
        assertEquals(1, attributes.size());
    }

    @Test
    public void testGetAttributeById() {
        Attribute attribute = repository.findById(1L).orElse(null);
        assertNotNull(attribute);
        assertNotNull(attribute.getId());
    }

    @Test
    public void testCreateAttribute() {
        Attribute attribute = new Attribute("test", 1);
        Attribute createdAttribute = repository.save(attribute);
        assertNotNull(createdAttribute);
        assertEquals("test", createdAttribute.getName());
    }

    @Test
    public void testUpdateAttribute() {
        Attribute attribute = new Attribute("test", 1);
        attribute.setId(1L);
        Attribute updatedAttribute = repository.save(attribute);
        assertNotNull(updatedAttribute);
        assertEquals("test", updatedAttribute.getName());
    }
}

@RunWith(SpringRunner.class)
@SpringBootTest
public class ValueRepositoryTest {

    @Autowired
    private ValueRepository repository;

    @Test
    public void testGetAll() {
        List<Value> values = repository.findAll();
        assertNotNull(values);
        assertEquals(1, values.size());
    }

    @Test
    public void testGetValueById() {
        Value value = repository.findById(1L).orElse(null);
        assertNotNull(value);
        assertNotNull(value.getId());
    }

    @Test
    public void testCreateValue() {
        Value value = new Value("test", 1, 1);
        Value createdValue = repository.save(value);
        assertNotNull(createdValue);
        assertEquals("test", createdValue.getValue());
    }

    @Test
    public void testUpdateValue() {
        Value value = new Value("test", 1, 1);
        value.setId(1L);
        Value updatedValue = repository.save(value);
        assertNotNull(updatedValue);
        assertEquals("test", updatedValue.getValue());
    }
}
```

**Functional Tests**

```java
@RunWith(SpringRunner.class)
@SpringBootTest
public class EntityTypeServiceTest {

    @Autowired
    private EntityTypeRepository repository;

    @Autowired
    private EntityTypeService service;

    @Before
    public void setup() {
        EntityType entityType = new EntityType("test");
        repository.save(entityType);
    }

    @Test
    public void testGetAll() {
        List<EntityType> entityTypes = service.getAll();
        assertNotNull(entityTypes);
        assertEquals(1, entityTypes.size());
    }

    @Test
    public void testGetEntityById() {
        EntityType entityType = service.getEntityById(1L);
        assertNotNull(entityType);
        assertNotNull(entityType.getId());
    }

    @Test
    public void testCreateEntityType() {
        EntityType entityType = new EntityType("test");
        service.createEntityType(entityType.getName());
        List<EntityType> entityTypes = service.getAll();
        assertNotNull(entityTypes);
        assertEquals(2, entityTypes.size());
    }

    @Test
    public void testUpdateEntityType() {
        EntityType entityType = new EntityType("test");
        service.createEntityType(entityType.getName());
        service.updateEntityType(entityType, "updatedTest");
        List<EntityType> entityTypes = service.getAll();
        assertNotNull(entityTypes);
        assertEquals(2, entityTypes.size());
    }

    @Test
    public void testDeleteEntityById() {
        EntityType entityType = new EntityType("test");
        service.createEntityType(entityType.getName());
        service.deleteEntityById(1L);
        List<EntityType> entityTypes = service.getAll();
        assertNull(entityTypes);
    }
}

@RunWith(SpringRunner.class)
@SpringBootTest
public class EntityServiceTest {

    @Autowired
    private EntityRepository repository;

    @Autowired
    private EntityService service;

    @Before
    public void setup() {
        Entity entity = new Entity("test", 1);
        repository.save(entity);
    }

    @Test
    public void testGetAll() {
        List<Entity> entities = service.getAll();
        assertNotNull(entities);
        assertEquals(1, entities.size());
    }

    @Test
    public void testGetEntityById() {
        Entity entity = service.getEntityById(1L);
        assertNotNull(entity);
        assertNotNull(entity.getId());
    }

    @Test
    public void testCreateEntity() {
        Entity entity = new Entity("test", 1);
        service.createEntity(entity.getName(), entity.getEntityType().getId());
        List<Entity> entities = service.getAll();
        assertNotNull(entities);
        assertEquals(2, entities.size());
    }

    @Test
    public void testUpdateEntity() {
        Entity entity = new Entity("test", 1);
        service.createEntity(entity.getName(), entity.getEntityType().getId());
        service.updateEntity(entity, "updatedTest", entity.getEntityType().getId());
        List<Entity> entities = service.getAll();
        assertNotNull(entities);
        assertEquals(2, entities.size());
    }

    @Test
    public void testDeleteEntityById() {
        Entity entity = new Entity("test", 1);
        service.createEntity(entity.getName(), entity.getEntityType().getId());
        service.deleteEntityById(1L);
        List<Entity> entities = service.getAll();
        assertNull(entities);
    }
}

@RunWith(SpringRunner.class)
@SpringBootTest
public class AttributeServiceTest {

    @Autowired
    private AttributeRepository repository;

    @Autowired
    private AttributeService service;

    @Before
    public void setup() {
        Attribute attribute = new Attribute("test", 1);
        repository.save(attribute);
    }

    @Test
    public void testGetAll() {
        List<Attribute> attributes = service.getAll();
        assertNotNull(attributes);
        assertEquals(1, attributes.size());
    }

    @Test
    public void testGetAttributeById() {
        Attribute attribute = service.getAttributeById(1L);
        assertNotNull(attribute);
        assertNotNull(attribute.getId());
    }

    @Test
    public void testCreateAttribute() {
        Attribute attribute = new Attribute("test", 1);
        service.createAttribute(attribute.getName(), attribute.getEntityType().getId());
        List<Attribute> attributes = service.getAll();
        assertNotNull(attributes);
        assertEquals(2, attributes.size());
    }

    @Test
    public void testUpdateAttribute() {
        Attribute attribute = new Attribute("test", 1);
        service.createAttribute(attribute.getName(), attribute.getEntityType().getId());
        service.updateAttribute(attribute, "updatedTest", attribute.getEntityType().getId());
        List<Attribute> attributes = service.getAll();
        assertNotNull(attributes);
        assertEquals(2, attributes.size());
    }

    @Test
    public void testDeleteAttributeById() {
        Attribute attribute = new Attribute("test", 1);
        service.createAttribute(attribute.getName(), attribute.getEntityType().getId());
        service.deleteAttributeById(1L);
        List<Attribute> attributes = service.getAll();
        assertNull(attributes);
    }
}

@RunWith(SpringRunner.class)
@SpringBootTest
public class ValueServiceTest {

    @Autowired
    private ValueRepository repository;

    @Autowired
    private ValueService service;

    @Before
    public void setup() {
        Value value = new Value("test", 1, 1);
        repository.save(value);
    }

    @Test
    public void testGetAll() {
        List<Value> values = service.getAll();
        assertNotNull(values);
        assertEquals(1, values.size());
    }

    @Test
    public void testGetValueById() {
        Value value = service.getValueById(1L);
        assertNotNull(value);
        assertNotNull(value.getId());
    }

    @Test
    public void testCreateValue() {
        Value value = new Value("test", 1, 1);
        service.createValue(value.getValue(), value.getEntity().getId(), value.getAttribute().getId());
        List<Value> values = service.getAll();
        assertNotNull(values);
        assertEquals(2, values.size());
    }

    @Test
    public void testUpdateValue() {
        Value value = new Value("test", 1, 1);
        service.createValue(value.getValue(), value.getEntity().getId(), value.getAttribute().getId());
        service.updateValue(value, "updatedTest", value.getEntity().getId(), value.getAttribute().getId());
        List<Value> values = service.getAll();
        assertNotNull(values);
        assertEquals(2, values.size());
    }

    @Test
    public void testDeleteValueById() {
        Value value = new Value("test", 1, 1);
        service.createValue(value.getValue(), value.getEntity().getId(), value.getAttribute().getId());
        service.deleteValueById(1L);
        List<Value> values = service.getAll();
        assertNull(values);
    }
}


      </p>
    </pre>


    <!--
        --------------------- Start prompt ----------------------
    -->
    <!--

    <button class="accordion">
        <pre>
            <b>
                Prompt example
            </b>
        </pre>
    </button>
    <pre class="panel">
      <p>
        Answer example
      </p>
    </pre>

    -->


    <script>
      var acc = document.getElementsByClassName("accordion");
      
      for (var i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var panel = this.nextElementSibling;
          
          if (panel.style.display === "block") {
            panel.style.display = "none";
          } else {
            panel.style.display = "block";
          }
        });
      }
    </script>
  </body>
</html>

